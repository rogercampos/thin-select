const buildContainer = (id) => {
    const container = document.createElement('div');
    container.id = id;
    container.classList.add('ss-main');
    return container;
};
const buildContent = () => {
    const content = document.createElement('div');
    content.classList.add('ss-content');
    return content;
};
const buildSearch = (onSearch) => {
    const container = document.createElement('div');
    container.classList.add('ss-search');
    const input = document.createElement('input');
    const searchReturn = {
        container,
        input
    };
    input.type = 'search';
    input.tabIndex = 0;
    input.setAttribute('aria-label', "Search...");
    input.setAttribute('autocapitalize', 'off');
    input.setAttribute('autocomplete', 'off');
    input.setAttribute('autocorrect', 'off');
    input.addEventListener('input', () => {
        onSearch(input.value);
    });
    container.appendChild(input);
    return searchReturn;
};
const buildResultsList = () => {
    const list = document.createElement('div');
    list.classList.add('ss-list');
    list.setAttribute('role', 'listbox');
    return list;
};
const buildSingleSelect = (onClick, onDeselect) => {
    const container = document.createElement('div');
    container.classList.add('ss-single-selected');
    // Title text
    const title = document.createElement('span');
    title.classList.add('placeholder');
    container.appendChild(title);
    // Deselect
    const deselect = document.createElement('span');
    deselect.innerHTML = "x";
    deselect.classList.add('ss-deselect', 'ss-hide');
    deselect.onclick = onDeselect;
    container.appendChild(deselect);
    // Arrow
    const arrowContainer = document.createElement('span');
    arrowContainer.classList.add('ss-arrow');
    const arrowIcon = document.createElement('span');
    arrowIcon.classList.add('arrow-down');
    arrowContainer.appendChild(arrowIcon);
    container.appendChild(arrowContainer);
    container.onclick = onClick;
    return {
        container,
        title,
        deselect,
        arrowIcon: {
            container: arrowContainer,
            arrow: arrowIcon
        }
    };
};
const generateOption = (option, onOptionSelect) => {
    const optionEl = document.createElement('div');
    optionEl.classList.add('ss-option');
    optionEl.setAttribute('role', 'option');
    optionEl.addEventListener('click', () => {
        onOptionSelect(option);
    });
    if (option.selected) {
        optionEl.classList.add('ss-option-selected');
    }
    if (option.innerHtml) {
        optionEl.innerHTML = option.innerHtml;
    }
    else {
        optionEl.innerText = option.text || '\xa0';
    }
    return optionEl;
};

class View {
    container;
    content;
    search;
    list;
    singleSelected;
    onSearch;
    onDeselect;
    onClose;
    onOpen;
    onOptionSelect;
    isMultiple;
    isOpened;
    element;
    constructor(el, id, isMultiple, onSearch, onOptionSelect, onDeselect, onClose, onOpen) {
        this.element = el;
        this.onSearch = onSearch;
        this.onDeselect = onDeselect;
        this.onOptionSelect = onOptionSelect;
        this.onClose = onClose;
        this.onOpen = onOpen;
        this.isMultiple = isMultiple;
        this.isOpened = false;
        this.container = buildContainer(id);
        this.content = buildContent();
        this.search = buildSearch(this.onSearch);
        this.list = buildResultsList();
        const onClick = () => {
            this.isOpened ? this.onClose() : this.onOpen();
        };
        this.singleSelected = buildSingleSelect(onClick, this.onDeselect);
        this.container.appendChild(this.singleSelected.container);
        this.container.appendChild(this.content);
        this.content.appendChild(this.search.container);
        this.content.appendChild(this.list);
        el.style.display = 'none';
        el.dataset.tsid = id;
        if (el.parentNode) {
            el.parentNode.insertBefore(this.container, el.nextSibling);
        }
        else {
            throw new Error('thin-select: The given select element must have a parent node');
        }
    }
    openPanel = () => {
        this.isOpened = true;
        if (this.singleSelected) {
            this.singleSelected.arrowIcon.arrow.classList.remove('arrow-down');
            this.singleSelected.arrowIcon.arrow.classList.add('arrow-up');
            this.singleSelected.container.classList.add('ss-open-below');
        }
        this.content.classList.add('ss-open');
        // setTimeout is for animation completion
        setTimeout(() => {
            this.search.input.focus();
        }, 100);
    };
    closePanel = () => {
        this.isOpened = false;
        this.search.input.value = '';
        if (this.singleSelected) {
            this.singleSelected.container.classList.remove('ss-open-above');
            this.singleSelected.container.classList.remove('ss-open-below');
            this.singleSelected.arrowIcon.arrow.classList.add('arrow-down');
            this.singleSelected.arrowIcon.arrow.classList.remove('arrow-up');
        }
        this.content.classList.remove('ss-open');
    };
    setSelected = (option) => {
        if (this.singleSelected) {
            this.singleSelected.title.innerText = option.text;
        }
        Array.from(this.element.options).forEach((o) => {
            if (o.value === option.value) {
                o.selected = true;
            }
            else {
                o.selected = false;
            }
        });
    };
    setDisplayList = (options) => {
        this.list.innerHTML = '';
        options.forEach((option) => this.list.appendChild(generateOption(option, this.onOptionSelect)));
    };
}

class SelectParser {
    el;
    constructor(el) {
        if (!(el instanceof HTMLSelectElement)) {
            throw new Error('thin-select: "select" dom element must be an HTMLSelectElement');
        }
        this.el = el;
    }
    analyze() {
        const isMultiple = this.el.multiple;
        const options = [];
        Array.from(this.el.options).forEach((option) => {
            options.push({ value: option.value, text: option.text, selected: option.selected });
        });
        return ({
            isMultiple,
            options
        });
    }
}

class ThinSelect {
    view;
    id;
    displayedOptionsList;
    isSearching;
    constructor(params) {
        const el = typeof (params.select) === "string" ? document.querySelector(params.select) : params.select;
        const initialSelectInfo = (new SelectParser(el)).analyze();
        this.id = 'ts-' + Math.floor(Math.random() * 100000);
        this.isSearching = false;
        this.view = new View(el, this.id, initialSelectInfo.isMultiple, this.onSearch, this.onOptionSelect, this.onDeselect, this.closePanel, this.openPanel);
        this.displayedOptionsList = initialSelectInfo.options;
        this.view.setDisplayList(this.displayedOptionsList);
    }
    onSearch = (text) => {
        this.isSearching = true;
        const matchedOptions = this.displayedOptionsList.filter(option => this.searchFilter(option.text, text));
        this.view.setDisplayList(matchedOptions);
    };
    onDeselect = () => {
        console.log(`onDeselect`);
    };
    closePanel = () => {
        this.view.closePanel();
        setTimeout(() => {
            this.view.setDisplayList(this.displayedOptionsList);
        }, 100);
        this.isSearching = false;
    };
    openPanel = () => {
        this.view.openPanel();
    };
    onOptionSelect = (option) => {
        this.displayedOptionsList.forEach((x) => {
            if (x.value === option.value) {
                x.selected = true;
            }
            else {
                x.selected = false;
            }
        });
        this.view.setSelected(option);
        this.closePanel();
    };
    searchFilter = (optionText, inputText) => {
        return optionText.toLowerCase().indexOf(inputText.toLowerCase()) !== -1;
    };
}

export { ThinSelect as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9kb21fZmFjdG9yeS50cyIsIi4uL3NyYy92aWV3LnRzIiwiLi4vc3JjL3NlbGVjdF9wYXJzZXIudHMiLCIuLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtPcHRpb259IGZyb20gXCIuL21vZGVsc1wiXG5pbXBvcnQgeyBTZWFyY2gsIFNpbmdsZVNlbGVjdGVkIH0gZnJvbSBcIi4vdmlld1wiO1xuXG5jb25zdCBidWlsZENvbnRhaW5lciA9IChpZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb250YWluZXIuaWQgPSBpZDtcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3NzLW1haW4nKTtcbiAgcmV0dXJuIGNvbnRhaW5lcjtcbn1cblxuY29uc3QgYnVpbGRDb250ZW50ID0gKCkgPT4ge1xuICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnc3MtY29udGVudCcpO1xuICByZXR1cm4gY29udGVudDtcbn1cblxuY29uc3QgYnVpbGRTZWFyY2ggPSAob25TZWFyY2g6ICh0ZXh0OiBzdHJpbmcpID0+IHZvaWQpID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3NzLXNlYXJjaCcpO1xuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgXG4gIGNvbnN0IHNlYXJjaFJldHVybjogU2VhcmNoID0ge1xuICAgIGNvbnRhaW5lcixcbiAgICBpbnB1dFxuICB9XG4gIFxuICBpbnB1dC50eXBlID0gJ3NlYXJjaCdcbiAgaW5wdXQudGFiSW5kZXggPSAwXG4gIGlucHV0LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIFwiU2VhcmNoLi4uXCIpXG4gIGlucHV0LnNldEF0dHJpYnV0ZSgnYXV0b2NhcGl0YWxpemUnLCAnb2ZmJylcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnLCAnb2ZmJylcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCdhdXRvY29ycmVjdCcsICdvZmYnKVxuICBcbiAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgb25TZWFyY2goaW5wdXQudmFsdWUpO1xuICB9KVxuICBcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KVxuICBcbiAgcmV0dXJuIHNlYXJjaFJldHVybjtcbn1cblxuXG5jb25zdCBidWlsZFJlc3VsdHNMaXN0ID0gKCkgPT4ge1xuICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgbGlzdC5jbGFzc0xpc3QuYWRkKCdzcy1saXN0JylcbiAgbGlzdC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbGlzdGJveCcpXG4gIHJldHVybiBsaXN0O1xufVxuXG5cbmNvbnN0IGJ1aWxkU2luZ2xlU2VsZWN0ID0gKG9uQ2xpY2s6ICgpID0+IHZvaWQsIG9uRGVzZWxlY3Q6ICgpID0+IHZvaWQpOiBTaW5nbGVTZWxlY3RlZCA9PiB7XG4gIGNvbnN0IGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc3Mtc2luZ2xlLXNlbGVjdGVkJylcbiAgXG4gIC8vIFRpdGxlIHRleHRcbiAgY29uc3QgdGl0bGU6IEhUTUxTcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICB0aXRsZS5jbGFzc0xpc3QuYWRkKCdwbGFjZWhvbGRlcicpXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSlcbiAgXG4gIC8vIERlc2VsZWN0XG4gIGNvbnN0IGRlc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gIGRlc2VsZWN0LmlubmVySFRNTCA9IFwieFwiXG4gIGRlc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ3NzLWRlc2VsZWN0JywgJ3NzLWhpZGUnKVxuICBkZXNlbGVjdC5vbmNsaWNrID0gb25EZXNlbGVjdDtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRlc2VsZWN0KVxuICBcbiAgLy8gQXJyb3dcbiAgY29uc3QgYXJyb3dDb250YWluZXI6IEhUTUxTcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICBhcnJvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzcy1hcnJvdycpXG4gIFxuICBjb25zdCBhcnJvd0ljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgYXJyb3dJY29uLmNsYXNzTGlzdC5hZGQoJ2Fycm93LWRvd24nKVxuICBhcnJvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChhcnJvd0ljb24pXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhcnJvd0NvbnRhaW5lcilcbiAgXG4gIGNvbnRhaW5lci5vbmNsaWNrID0gb25DbGljaztcbiAgXG4gIHJldHVybiB7XG4gICAgY29udGFpbmVyLFxuICAgIHRpdGxlLFxuICAgIGRlc2VsZWN0LFxuICAgIGFycm93SWNvbjoge1xuICAgICAgY29udGFpbmVyOiBhcnJvd0NvbnRhaW5lcixcbiAgICAgIGFycm93OiBhcnJvd0ljb25cbiAgICB9XG4gIH1cbn1cblxuXG5jb25zdCBnZW5lcmF0ZU9wdGlvbiA9IChvcHRpb246IE9wdGlvbiwgb25PcHRpb25TZWxlY3Q6IChhOiBPcHRpb24pID0+IHZvaWQpID0+IHtcbiAgY29uc3Qgb3B0aW9uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICBvcHRpb25FbC5jbGFzc0xpc3QuYWRkKCdzcy1vcHRpb24nKVxuICBvcHRpb25FbC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnb3B0aW9uJylcbiAgXG4gIG9wdGlvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIG9uT3B0aW9uU2VsZWN0KG9wdGlvbik7XG4gIH0pXG4gIFxuICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgb3B0aW9uRWwuY2xhc3NMaXN0LmFkZCgnc3Mtb3B0aW9uLXNlbGVjdGVkJyk7XG4gIH1cbiAgXG4gIGlmIChvcHRpb24uaW5uZXJIdG1sKSB7XG4gICAgb3B0aW9uRWwuaW5uZXJIVE1MID0gb3B0aW9uLmlubmVySHRtbDtcbiAgfSBlbHNlIHtcbiAgICBvcHRpb25FbC5pbm5lclRleHQgPSBvcHRpb24udGV4dCB8fCAnXFx4YTAnO1xuICB9XG4gIFxuICByZXR1cm4gb3B0aW9uRWw7XG59XG4gIFxuXG5leHBvcnQgeyBidWlsZENvbnRhaW5lciwgYnVpbGRDb250ZW50LCBidWlsZFNlYXJjaCwgYnVpbGRSZXN1bHRzTGlzdCwgYnVpbGRTaW5nbGVTZWxlY3QsIGdlbmVyYXRlT3B0aW9uIH07IiwiaW1wb3J0IHtPcHRpb259IGZyb20gXCIuL21vZGVsc1wiO1xuaW1wb3J0IHtcbiAgYnVpbGRDb250YWluZXIsXG4gIGJ1aWxkQ29udGVudCxcbiAgYnVpbGRSZXN1bHRzTGlzdCxcbiAgYnVpbGRTZWFyY2gsXG4gIGJ1aWxkU2luZ2xlU2VsZWN0LFxuICBnZW5lcmF0ZU9wdGlvblxufSBmcm9tIFwiLi9kb21fZmFjdG9yeVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpbmdsZVNlbGVjdGVkIHtcbiAgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudFxuICB0aXRsZTogSFRNTFNwYW5FbGVtZW50XG4gIGRlc2VsZWN0OiBIVE1MU3BhbkVsZW1lbnRcbiAgYXJyb3dJY29uOiB7XG4gICAgY29udGFpbmVyOiBIVE1MU3BhbkVsZW1lbnRcbiAgICBhcnJvdzogSFRNTFNwYW5FbGVtZW50XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2gge1xuICBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50XG4gIGlucHV0OiBIVE1MSW5wdXRFbGVtZW50XG4gIGFkZGFibGU/OiBIVE1MRGl2RWxlbWVudFxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xuICBwdWJsaWMgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudFxuICBwdWJsaWMgY29udGVudDogSFRNTERpdkVsZW1lbnRcbiAgcHVibGljIHNlYXJjaDogU2VhcmNoXG4gIHB1YmxpYyBsaXN0OiBIVE1MRGl2RWxlbWVudFxuICBwdWJsaWMgc2luZ2xlU2VsZWN0ZWQ6IFNpbmdsZVNlbGVjdGVkIHwgbnVsbFxuICBcbiAgcHVibGljIG9uU2VhcmNoOiBhbnlcbiAgcHVibGljIG9uRGVzZWxlY3Q6IGFueVxuICBwdWJsaWMgb25DbG9zZTogYW55XG4gIHB1YmxpYyBvbk9wZW46IGFueVxuICBwdWJsaWMgb25PcHRpb25TZWxlY3Q6IGFueVxuICBwdWJsaWMgaXNNdWx0aXBsZTogYm9vbGVhblxuICBwdWJsaWMgaXNPcGVuZWQ6IGJvb2xlYW5cbiAgXG4gIHB1YmxpYyBlbGVtZW50OiBIVE1MU2VsZWN0RWxlbWVudDtcbiAgXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgZWw6IEhUTUxTZWxlY3RFbGVtZW50LFxuICAgICAgaWQ6IHN0cmluZyxcbiAgICAgIGlzTXVsdGlwbGU6IGJvb2xlYW4sXG4gICAgICBvblNlYXJjaDogYW55LFxuICAgICAgb25PcHRpb25TZWxlY3Q6IGFueSxcbiAgICAgIG9uRGVzZWxlY3Q6IGFueSxcbiAgICAgIG9uQ2xvc2U6IGFueSxcbiAgICAgIG9uT3BlbjogYW55LFxuICApIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbDtcbiAgICB0aGlzLm9uU2VhcmNoID0gb25TZWFyY2g7XG4gICAgdGhpcy5vbkRlc2VsZWN0ID0gb25EZXNlbGVjdDtcbiAgICB0aGlzLm9uT3B0aW9uU2VsZWN0ID0gb25PcHRpb25TZWxlY3Q7XG4gICAgdGhpcy5vbkNsb3NlID0gb25DbG9zZTtcbiAgICB0aGlzLm9uT3BlbiA9IG9uT3BlbjtcbiAgICBcbiAgICB0aGlzLmlzTXVsdGlwbGUgPSBpc011bHRpcGxlO1xuICAgIHRoaXMuaXNPcGVuZWQgPSBmYWxzZTtcbiAgICBcbiAgICB0aGlzLmNvbnRhaW5lciA9IGJ1aWxkQ29udGFpbmVyKGlkKTtcbiAgICBcbiAgICB0aGlzLmNvbnRlbnQgPSBidWlsZENvbnRlbnQoKTtcbiAgICB0aGlzLnNlYXJjaCA9IGJ1aWxkU2VhcmNoKHRoaXMub25TZWFyY2gpO1xuICAgIHRoaXMubGlzdCA9IGJ1aWxkUmVzdWx0c0xpc3QoKTtcbiAgICBcbiAgICBjb25zdCBvbkNsaWNrID0gKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5pc09wZW5lZCA/IHRoaXMub25DbG9zZSgpIDogdGhpcy5vbk9wZW4oKTtcbiAgICB9XG4gICAgdGhpcy5zaW5nbGVTZWxlY3RlZCA9IGJ1aWxkU2luZ2xlU2VsZWN0KG9uQ2xpY2ssIHRoaXMub25EZXNlbGVjdCk7XG4gICAgXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5zaW5nbGVTZWxlY3RlZC5jb250YWluZXIpXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50KVxuICAgIFxuICAgIHRoaXMuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnNlYXJjaC5jb250YWluZXIpXG4gICAgdGhpcy5jb250ZW50LmFwcGVuZENoaWxkKHRoaXMubGlzdClcbiAgICBcbiAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGVsLmRhdGFzZXQudHNpZCA9IGlkO1xuICAgIFxuICAgIGlmIChlbC5wYXJlbnROb2RlKSB7XG4gICAgICBlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmNvbnRhaW5lciwgZWwubmV4dFNpYmxpbmcpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndGhpbi1zZWxlY3Q6IFRoZSBnaXZlbiBzZWxlY3QgZWxlbWVudCBtdXN0IGhhdmUgYSBwYXJlbnQgbm9kZScpO1xuICAgIH1cbiAgfVxuICBcbiAgb3BlblBhbmVsID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuaXNPcGVuZWQgPSB0cnVlO1xuICAgIFxuICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdGVkKSB7XG4gICAgICB0aGlzLnNpbmdsZVNlbGVjdGVkLmFycm93SWNvbi5hcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdhcnJvdy1kb3duJylcbiAgICAgIHRoaXMuc2luZ2xlU2VsZWN0ZWQuYXJyb3dJY29uLmFycm93LmNsYXNzTGlzdC5hZGQoJ2Fycm93LXVwJylcbiAgICAgIFxuICAgICAgdGhpcy5zaW5nbGVTZWxlY3RlZC5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc3Mtb3Blbi1iZWxvdycpXG4gICAgfVxuICAgIFxuICAgIHRoaXMuY29udGVudC5jbGFzc0xpc3QuYWRkKCdzcy1vcGVuJylcbiAgICBcbiAgICAvLyBzZXRUaW1lb3V0IGlzIGZvciBhbmltYXRpb24gY29tcGxldGlvblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5zZWFyY2guaW5wdXQuZm9jdXMoKVxuICAgIH0sIDEwMClcbiAgfVxuICBcbiAgY2xvc2VQYW5lbCA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLmlzT3BlbmVkID0gZmFsc2U7XG4gICAgdGhpcy5zZWFyY2guaW5wdXQudmFsdWUgPSAnJztcbiAgICBcbiAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3RlZCkge1xuICAgICAgdGhpcy5zaW5nbGVTZWxlY3RlZC5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc3Mtb3Blbi1hYm92ZScpXG4gICAgICB0aGlzLnNpbmdsZVNlbGVjdGVkLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzcy1vcGVuLWJlbG93JylcbiAgICAgIHRoaXMuc2luZ2xlU2VsZWN0ZWQuYXJyb3dJY29uLmFycm93LmNsYXNzTGlzdC5hZGQoJ2Fycm93LWRvd24nKVxuICAgICAgdGhpcy5zaW5nbGVTZWxlY3RlZC5hcnJvd0ljb24uYXJyb3cuY2xhc3NMaXN0LnJlbW92ZSgnYXJyb3ctdXAnKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnc3Mtb3BlbicpXG4gIH1cbiAgXG4gIFxuICBzZXRTZWxlY3RlZCA9IChvcHRpb246IE9wdGlvbik6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdGVkKSB7XG4gICAgICB0aGlzLnNpbmdsZVNlbGVjdGVkLnRpdGxlLmlubmVyVGV4dCA9IG9wdGlvbi50ZXh0O1xuICAgIH1cbiAgICBcbiAgICBBcnJheS5mcm9tKHRoaXMuZWxlbWVudC5vcHRpb25zKS5mb3JFYWNoKChvKSA9PiB7XG4gICAgICBpZiAoby52YWx1ZSA9PT0gb3B0aW9uLnZhbHVlKSB7XG4gICAgICAgIG8uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgby5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgXG4gIHNldERpc3BsYXlMaXN0ID0gKG9wdGlvbnM6IE9wdGlvbltdKTogdm9pZCA9PiB7XG4gICAgdGhpcy5saXN0LmlubmVySFRNTCA9ICcnO1xuICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB0aGlzLmxpc3QuYXBwZW5kQ2hpbGQoZ2VuZXJhdGVPcHRpb24ob3B0aW9uLCB0aGlzLm9uT3B0aW9uU2VsZWN0KSkpXG4gIH07XG4gIFxufSIsImltcG9ydCB7IE9wdGlvbn0gZnJvbSBcIi4vbW9kZWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbGVjdFBhcnNlciB7XG4gIHB1YmxpYyBlbDogSFRNTFNlbGVjdEVsZW1lbnQ7XG4gIFxuICBjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIShlbCBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aGluLXNlbGVjdDogXCJzZWxlY3RcIiBkb20gZWxlbWVudCBtdXN0IGJlIGFuIEhUTUxTZWxlY3RFbGVtZW50Jyk7XG4gICAgfVxuICAgIHRoaXMuZWwgPSBlbDtcbiAgfVxuICBcbiAgYW5hbHl6ZSgpIHtcbiAgICBjb25zdCBpc011bHRpcGxlID0gdGhpcy5lbC5tdWx0aXBsZTtcbiAgICBjb25zdCBvcHRpb25zOiBPcHRpb25bXSA9IFtdO1xuICBcbiAgICBBcnJheS5mcm9tKHRoaXMuZWwub3B0aW9ucykuZm9yRWFjaCgob3B0aW9uOiBIVE1MT3B0aW9uRWxlbWVudCkgPT4ge1xuICAgICAgb3B0aW9ucy5wdXNoKHsgdmFsdWU6IG9wdGlvbi52YWx1ZSwgdGV4dDogb3B0aW9uLnRleHQsIHNlbGVjdGVkOiBvcHRpb24uc2VsZWN0ZWQgfSk7XG4gICAgfSk7XG4gIFxuICAgIHJldHVybih7XG4gICAgICBpc011bHRpcGxlLFxuICAgICAgb3B0aW9uc1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuLi9zdHlsZXMvdGhpbi1zZWxlY3Quc2Nzc1wiXG5pbXBvcnQgVmlldyBmcm9tIFwiLi92aWV3XCI7XG5pbXBvcnQgU2VsZWN0UGFyc2VyIGZyb20gXCIuL3NlbGVjdF9wYXJzZXJcIjtcbmltcG9ydCB7T3B0aW9ufSBmcm9tIFwiLi9tb2RlbHNcIlxuXG5pbnRlcmZhY2UgVGhpblNlbGVjdFBhcmFtcyB7XG4gIHNlbGVjdDogc3RyaW5nIHwgSFRNTFNlbGVjdEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRoaW5TZWxlY3Qge1xuICBwdWJsaWMgdmlldzogVmlldztcbiAgcHVibGljIGlkOiBzdHJpbmc7XG4gIHB1YmxpYyBkaXNwbGF5ZWRPcHRpb25zTGlzdDogT3B0aW9uW107XG4gIHB1YmxpYyBpc1NlYXJjaGluZzogYm9vbGVhbjtcbiAgXG4gIGNvbnN0cnVjdG9yKHBhcmFtczogVGhpblNlbGVjdFBhcmFtcykge1xuICAgIGNvbnN0IGVsOiBIVE1MU2VsZWN0RWxlbWVudCA9IHR5cGVvZiAocGFyYW1zLnNlbGVjdCkgPT09IFwic3RyaW5nXCIgPyAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwYXJhbXMuc2VsZWN0KSBhcyBIVE1MU2VsZWN0RWxlbWVudCkgOiBwYXJhbXMuc2VsZWN0O1xuICAgIFxuICAgIGNvbnN0IGluaXRpYWxTZWxlY3RJbmZvID0gKG5ldyBTZWxlY3RQYXJzZXIoZWwpKS5hbmFseXplKCk7XG4gICAgXG4gICAgdGhpcy5pZCA9ICd0cy0nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwKTtcbiAgICB0aGlzLmlzU2VhcmNoaW5nID0gZmFsc2U7XG4gICAgXG4gICAgdGhpcy52aWV3ID0gbmV3IFZpZXcoXG4gICAgICAgIGVsLFxuICAgICAgICB0aGlzLmlkLFxuICAgICAgICBpbml0aWFsU2VsZWN0SW5mby5pc011bHRpcGxlLFxuICAgICAgICB0aGlzLm9uU2VhcmNoLFxuICAgICAgICB0aGlzLm9uT3B0aW9uU2VsZWN0LFxuICAgICAgICB0aGlzLm9uRGVzZWxlY3QsXG4gICAgICAgIHRoaXMuY2xvc2VQYW5lbCxcbiAgICAgICAgdGhpcy5vcGVuUGFuZWwsXG4gICAgKTtcbiAgICB0aGlzLmRpc3BsYXllZE9wdGlvbnNMaXN0ID0gaW5pdGlhbFNlbGVjdEluZm8ub3B0aW9ucztcbiAgICB0aGlzLnZpZXcuc2V0RGlzcGxheUxpc3QodGhpcy5kaXNwbGF5ZWRPcHRpb25zTGlzdCk7XG4gIH1cbiAgXG4gIG9uU2VhcmNoID0gKHRleHQ6IHN0cmluZykgPT4ge1xuICAgIHRoaXMuaXNTZWFyY2hpbmcgPSB0cnVlO1xuICAgIGNvbnN0IG1hdGNoZWRPcHRpb25zID0gdGhpcy5kaXNwbGF5ZWRPcHRpb25zTGlzdC5maWx0ZXIob3B0aW9uID0+IHRoaXMuc2VhcmNoRmlsdGVyKG9wdGlvbi50ZXh0LCB0ZXh0KSk7XG4gICAgdGhpcy52aWV3LnNldERpc3BsYXlMaXN0KG1hdGNoZWRPcHRpb25zKTtcbiAgfVxuICBcbiAgb25EZXNlbGVjdCA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgb25EZXNlbGVjdGApXG4gIH1cbiAgXG4gIGNsb3NlUGFuZWwgPSAoKSA9PiB7XG4gICAgdGhpcy52aWV3LmNsb3NlUGFuZWwoKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudmlldy5zZXREaXNwbGF5TGlzdCh0aGlzLmRpc3BsYXllZE9wdGlvbnNMaXN0KTtcbiAgICB9LCAxMDApO1xuICAgIHRoaXMuaXNTZWFyY2hpbmcgPSBmYWxzZTtcbiAgfVxuICBcbiAgb3BlblBhbmVsID0gKCkgPT4ge1xuICAgIHRoaXMudmlldy5vcGVuUGFuZWwoKTtcbiAgfVxuICBcbiAgb25PcHRpb25TZWxlY3QgPSAob3B0aW9uOiBPcHRpb24pID0+IHtcbiAgICB0aGlzLmRpc3BsYXllZE9wdGlvbnNMaXN0LmZvckVhY2goKHgpID0+IHtcbiAgICAgIGlmICh4LnZhbHVlID09PSBvcHRpb24udmFsdWUpIHtcbiAgICAgICAgeC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4LnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLnZpZXcuc2V0U2VsZWN0ZWQob3B0aW9uKTtcbiAgICB0aGlzLmNsb3NlUGFuZWwoKTtcbiAgfVxuICBcbiAgc2VhcmNoRmlsdGVyID0gKG9wdGlvblRleHQ6IHN0cmluZywgaW5wdXRUZXh0OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gb3B0aW9uVGV4dC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoaW5wdXRUZXh0LnRvTG93ZXJDYXNlKCkpICE9PSAtMTtcbiAgfVxuICBcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxNQUFNLGNBQWMsR0FBRyxDQUFDLEVBQVUsS0FBSTtJQUNwQyxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2hELElBQUEsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDbEIsSUFBQSxTQUFTLENB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
